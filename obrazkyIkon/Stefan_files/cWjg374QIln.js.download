;/*FB_PKG_DELIM*/

__d("CometEntityHeaderTabBar.react",["CometEntityHeaderTabs.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.maxTabs,d=a.menuSize,e=a.tabs;a=a.tabsRouteTarget;var f=a===void 0?"self":a,g=e.findIndex(function(a){return a.isActive()});a=e.map(function(a,b){a.isActive;var c=a.linkProps;a=babelHelpers.objectWithoutPropertiesLoose(a,["isActive","linkProps"]);return c?babelHelpers["extends"]({},a,{linkProps:babelHelpers["extends"]({},c,{routeTarget:f}),selected:b===g}):babelHelpers["extends"]({},a,{selected:b===g})});return h.jsx(c("CometEntityHeaderTabs.react"),{maxTabs:b,menuSize:d,tabs:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ProfileWithReaction.react",["fbt","ActorHovercard.react","I64","MAWPSendOrRemoveReaction.bs","MDSListCell.react","MWPActor.bs","MWProfilePhoto.react","MWText.react","MWTextPairing.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.actorId,e=a.actualName,f=a.addOnIcon,g=a.isBroadcastThread,j=a.isSecure,k=a.message,l=a.profilePictureUrl,m=a.reaction,n=d("MAWPSendOrRemoveReaction.bs").useSendOrRemoveReaction(k,j,"message_reactions_details_tray");a=d("I64").to_string(d("MWPActor.bs").useActor());j=a===b;var o=c("useReStore")(),p=d("I64").of_string(b),q=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(o.table("threads")).getKeyRange(k.threadKey).map(function(a){a=a.parentThreadKey;a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(o.table("contextual_profile_v1")).getKeyRange(p,a));return a==null?void 0:a.profileName})},[p,o,k.threadKey]);a=j?h._("__JHASH__KuMUeq_mbxk__JHASH__"):void 0;j=j?function(){return n(k.messageId,g?m:void 0,"remove_reaction")}:void 0;return i.jsx(c("MDSListCell.react"),{addOnEnd:f,addOnStart:i.jsx(c("MWProfilePhoto.react"),{shape:"circle",size:40,source:{uri:l}}),content:i.jsx(c("MWTextPairing.react"),{headline:i.jsx(c("ActorHovercard.react"),{actorID:b,children:function(a){return i.jsx(c("MWText.react"),{numberOfLines:1,ref:a,type:"headline4",children:(a=q)!=null?a:e})}}),level:4,meta:a}),onPress:j,size:"medium",testid:void 0},b)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatReactionsDialog.bs",["fbt","CometEntityHeaderTabBar.react","EmojiRenderer","LSMediaUrl.bs","LSMessagingThreadTypeUtil","MWCardedDialog.react","MWChatReactionEmoji.bs","MWChatReactionsUtils.bs","MWV2ProfileWithReaction.react","ReQL.bs","ReQLSubscription.bs","bs_caml_obj","bs_curry","bs_int64","bs_js_dict","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function j(a){var b=a.actors,e=a.addOnIcon,f=a.isSecure,g=a.message,j=a.reaction;return b.map(function(a){var b=a[1];a=c("bs_int64").to_string(a[0].actorId);b=b!==void 0?[b.name,d("LSMediaUrl.bs").Contact.profilePictureUrl(b)]:[h._("__JHASH__AaE4hJExM0x__JHASH__"),"/images/chat/webrtc/no_profile_pic.png"];return i.jsx(c("MWV2ProfileWithReaction.react"),{actorId:a,actualName:b[0],addOnIcon:e,isBroadcastThread:!1,isSecure:f,message:g,profilePictureUrl:b[1],reaction:j},a)})}b={make:j};function k(a,b){var c=d("EmojiRenderer").parse(b).map(function(a){return a.emoji});if(c.length!==1)return i.jsx("span",{children:b});b=c[0];return i.jsx(d("MWChatReactionEmoji.bs").make,{emoji:b,size:a})}k.displayName=k.name+" [from "+f.id+"]";function l(a){var b=a.isSecure,d=a.message,e=a.reactions;a=a.selectorValue;if(a.TAG===0)return c("bs_js_dict").entries(e).map(function(c){var e=c[0],a=k(28,e);return i.jsx(j,{actors:c[1],addOnIcon:a,isSecure:b,message:d,reaction:e},e)});a=a._0;var f=k(28,a);e=c("bs_js_dict").get(e,a);if(e!==void 0)return i.jsx(j,{actors:e,addOnIcon:f,isSecure:b,message:d,reaction:a});else return null}e={make:l};function a(a){var b=a.message,e=a.onClose;a=a.thread;var f=i.useState(function(){return{_0:void 0,TAG:0}}),g=f[0],j=f[1],m=a.threadKey,n=b.messageId;f=d("LSMessagingThreadTypeUtil").isSecure(a.threadType);var o=c("useReStore")();a=d("ReQLSubscription.bs").useArray(i.useMemo(function(){return d("ReQL.bs").map(d("ReQL.bs").leftJoin(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(o.table("reactions")),{hd:m,tl:{hd:n,tl:0}}),d("ReQL.bs").fromTableAscending(o.table("contacts"))),function(a){var b=a[0];return[c("bs_curry")._1(d("MWChatReactionsUtils.bs").isHeart,b.reaction)?{actorId:b.actorId,authorityLevel:b.authorityLevel,messageId:b.messageId,reaction:d("MWChatReactionsUtils.bs").heartType1,threadKey:b.threadKey,timestampMs:b.timestampMs}:b,a[1]]})},[JSON.stringify(m),n,o])).reduce(function(a,b){var d=b[0];b=[[d,b[1]]];var e=c("bs_js_dict").get(a,d.reaction);e=e!==void 0?e.concat(b):b;a[d.reaction]=e;return a},{});var p=c("bs_js_dict").values(a).reduce(function(a,b){return a+b.length|0},0),q=[{isActive:function(){if(g.TAG===0)return!0;else return!1},label:h._("__JHASH__o_GpFVY02Fi__JHASH__",[h._param("total reactions",String(p))]),onPress:function(a){return c("bs_curry")._1(j,function(){return{_0:void 0,TAG:0}})}}];c("bs_js_dict").entries(a).sort(function(a,b){a=a[1].length;b=b[1].length;return b-a|0}).forEach(function(a){var b=a[0];a=i.jsxs("div",{children:[k(20,b),i.jsx("span",{className:"x1t2a60a",children:a[1].length})]});q.push({isActive:function(){return c("bs_caml_obj").caml_equal(g,{_0:b,TAG:1})},label:a,onPress:function(a){return c("bs_curry")._1(j,function(){return{_0:b,TAG:1}})}})});return i.jsxs(c("MWCardedDialog.react"),{onClose:e,title:h._("__JHASH__Jx02tgrOGW9__JHASH__"),withCloseButton:!0,children:[i.jsx(c("CometEntityHeaderTabBar.react"),{tabs:q}),i.jsx("div",{className:"x1phlbz0 xz65tgg xw2csxc x1odjw0f",children:i.jsx(l,{isSecure:f,message:b,reactions:a,selectorValue:g})})]})}a.displayName=a.name+" [from "+f.id+"]";f=a;a=b;b=k;e=e;f=f;g.ReactionActors=a;g.renderReaction=b;g.ReactionsDialogContent=e;g.make=f}),98);
__d("MWV2ChatReactionsDialog",["MWV2ChatReactionsDialog.bs"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("MWV2ChatReactionsDialog.bs").make}),98);