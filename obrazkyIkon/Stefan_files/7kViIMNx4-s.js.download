;/*FB_PKG_DELIM*/

__d("LSUpdateThreadParticipantAdminStatus",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(14).fetch([[[a[0],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(c.contactId,a[1])}),function(b){var c=b.update;b.item;return c({isAdmin:a[2]})})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSUpsertAttachmentRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.seq([function(c){return b.fe(b.db.table(17).fetch([[[a[0],a[1]]]]),function(a){return a["delete"]()})},function(c){return b.db.table(17).add({threadKey:a[0],mediaGroup:a[1],minTimestampMs:a[2],maxTimestampMs:[2328,1316134911],hasMoreBefore:a[3],hasMoreAfter:!1,isLoadingBefore:!1,isLoadingAfter:!1})}])},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("MAWMiActOnMiThreadReadyQueue",["FBLogger","WALoggerDeferred","asyncToGeneratorRuntime","clearTimeout","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Executed "," out of "," actions on MI thread\n    ready for chatId: ",", jid: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Executing action on MI thread ready: "," for chatId "," and jid ",""]);i=function(){return a};return a}var j=3e4,k=new Map(),l=new Map(),m=0;function a(a,b,d,e){var f;m++;f=(f=k.get(a))!=null?f:[];var g=c("setTimeout")(function(){c("FBLogger")("messenger_e2ee_web").mustfix("[MiActMapping] Took longer than %s ms to execute: %s in threadState: %s for chatId: %s, onMiThreadReady",j,d,e,a)},j);f.push({callback:b,description:d,sortId:m,threadState:e,timeoutId:g});k.set(a,f)}function e(a,b,d,e){var f;m++;f=(f=l.get(a))!=null?f:[];var g=c("setTimeout")(function(){c("FBLogger")("messenger_e2ee_web").mustfix("[MiActMapping] Took longer than %s ms to execute: %s in threadState: %s for jid: %s, onMiThreadReady",j,d,e,a)},j);f.push({callback:b,description:d,sortId:m,threadState:e,timeoutId:g});l.set(a,f)}function f(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g,j;g=(g=k.get(e))!=null?g:[];j=(j=l.get(f))!=null?j:[];g=[].concat(g,j);if(g.length===0)return;g.sort(function(a,b){return a.sortId-b.sortId});j=g.length;var m=0;while(g.length!==0){var n=g.shift(),o=n.callback,p=n.description,q=n.threadState;n=n.timeoutId;try{c("promiseDone")(d("WALoggerDeferred").LOG(i(),p,e,f)),yield o(a,b),c("clearTimeout")(n),m++}catch(a){c("clearTimeout")(n),c("FBLogger")("messenger_e2ee_web").catching(a).mustfix("[MiActMapping] Error executing callback on MI thread ready: %s, original threadState: %s, for chatId: %s and jid: %s",p,q,e,f)}}k["delete"](e);l["delete"](f);c("promiseDone")(d("WALoggerDeferred").LOG(h(),m,j,e,f))});return n.apply(this,arguments)}g.enqueueByChatId=a;g.enqueueByChatJid=e;g.processQueueOnMiThreadReady=f}),98);
__d("MWChatLoadMoreItemsIncrementally.bs",["LSIntEnum","LSMailboxMessagesRangeQueryDirection","bs_belt_Array","bs_belt_Option","bs_caml","bs_curry","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={contents:void 0};function j(){i.contents===void 0&&(i.contents=window.document.documentElement.style.overflowAnchor!==void 0);return c("bs_belt_Option").getWithDefault(i.contents,!1)}function a(a,b,e,f,g,i){a=a!==void 0?a:!1;var k=b!==void 0?b:!0;b=e!==void 0?e:{_0:void 0,TAG:0};e=a||!j();var l=f.length,m;switch(b.TAG){case 1:case 2:m=b._0>=200;break;case 0:case 3:m=!1;break}a=h.useState(function(){if(m)return l;else if(k)if(window.screen.availHeight<1200)return 20;else return 40;else return 10});var n=a[0],o=a[1];b=h.useMemo(function(){return c("bs_belt_Array").sliceToEnd(f,-n|0)},[f,n]);var p=h.useRef(n);a=h.useCallback(function(a){c("bs_caml").i64_neq(a,d("LSIntEnum").ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE))&&c("unrecoverableViolation")("Message fetch direction must be 'before'","messenger_web_product");if((p.current+15|0)<=l){p.current=p.current+15|0;return c("bs_curry")._1(o,function(){return p.current})}else{c("bs_curry")._1(g,d("LSIntEnum").ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE));if(p.current<(l+15|0)){p.current=l+15|0;return c("bs_curry")._1(o,function(){return p.current})}else return}},[g,l,o]);if(e)return[f,g,i];else return[b,a,i||n<l]}b=15;e=10;f=20;var k=40,l=1200,m=200;g.useLoadMore=a;g.pageSize=b;g.initialCountSmall=e;g.initialCountDefault=f;g.initialCountTall=k;g.tallWindowHeight=l;g.minScrollPosToMountAll=m}),98);
__d("MAWAttachmentBlob.bs",["LSSuspense","MAWBridgeSendAndReceive","Promise","bs_belt_Option","bs_caml_format","bs_caml_option","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=new Map();function a(a){var e=h.get(a);if(e!=null)if(e.TAG===0)return c("LSSuspense").throwErrorOrPromise(e._0);else return e._0;e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{mediaId:c("bs_caml_format").caml_int32_of_string(a)}).then(function(d){h.set(a,{_0:URL.createObjectURL(c("bs_belt_Option").getExn(d)),TAG:1});return b("Promise").resolve()})["catch"](function(a){c("recoverableViolation")("Unable to getBlobUrlByMediaId","messenger_e2ee_web",{error:c("bs_caml_option").some(a)});return b("Promise").resolve()});h.set(a,{_0:e,TAG:0});return c("LSSuspense").throwErrorOrPromise(e)}function j(a){if(a!==void 0&&a.hasMedia!==!1)return k(a.attachmentFbid);else if(a!==void 0&&a.hasXma!==!1)return l(a,"preview");else return c("LSSuspense").throwErrorOrPromise(b("Promise").resolve())}function e(a,e){if(a===void 0)return c("LSSuspense").throwErrorOrPromise(b("Promise").resolve());var f=i.get(a.attachmentFbid+e);if(f!=null)if(f.TAG===0)return c("LSSuspense").throwErrorOrPromise(f._0);else return f._0;f=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByXMAId",{infoType:e,xmaId:c("bs_caml_format").caml_int32_of_string(a.attachmentFbid)}).then(function(d){i.set(a.attachmentFbid+e,{_0:URL.createObjectURL(c("bs_belt_Option").getExn(d==null?void 0:c("bs_caml_option").some(d))),TAG:1});return b("Promise").resolve()})["catch"](function(c){i.set(a.attachmentFbid+e,{_0:"",TAG:1});return b("Promise").resolve()});i.set(a.attachmentFbid+e,{_0:f,TAG:0});return c("LSSuspense").throwErrorOrPromise(f)}function f(a,b){return j(b)}var k=a;a=j;var l=e;e=f;g.getAttachmentBlobNonOptional=k;g.getAttachmentBlob=a;g.getInfoUrlXMA=l;g.useGetAttachmentBlob=e}),98);